<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="442.8px" preserveAspectRatio="none" style="width:1165px;height:442px;" version="1.1" viewBox="0 0 1165 442" width="1165.2px" zoomAndPan="magnify"><defs><filter height="300%" id="f16l18uzehotqk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="416.625" style="stroke: #A80036; stroke-width: 1.2;" width="508.2" x="286.8" y="4.8"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6" x="518.1" y="19.2803">Hono</text><rect fill="#FFFFFF" filter="url(#f16l18uzehotqk)" height="178.5563" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="365.4" y="239.2687"/><rect fill="#FFFFFF" filter="url(#f16l18uzehotqk)" height="19.2" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="1078.2" y="398.625"/><rect fill="#FFFFFF" filter="url(#f16l18uzehotqk)" height="233.0344" style="stroke: #000000; stroke-width: 2.4;" width="1053.6" x="98.4" y="175.1906"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="148.8" x2="148.8" y1="89.6719" y2="428.625"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="370.8" x2="370.8" y1="89.6719" y2="428.625"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="706.2" x2="706.2" y1="89.6719" y2="428.625"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="930" x2="930" y1="89.6719" y2="428.625"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="1083.6" x2="1083.6" y1="89.6719" y2="428.625"/><rect fill="#FEFECE" filter="url(#f16l18uzehotqk)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="73.2" x="110.4" y="47.3156"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4" x="118.8" y="71.3098">Device</text><rect fill="#FEFECE" filter="url(#f16l18uzehotqk)" height="55.9125" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="154.8" x="291.6" y="27.7594"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="138" x="300" y="51.7535">Protocol Adapter</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="100.8" x="318.6" y="71.3098">instance #1</text><rect fill="#FEFECE" filter="url(#f16l18uzehotqk)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="163.2" x="622.2" y="47.3156"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="146.4" x="630.6" y="71.3098">Command Router</text><rect fill="#FEFECE" filter="url(#f16l18uzehotqk)" height="55.9125" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="166.8" x="844.8" y="27.7594"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="145.2" x="853.2" y="51.7535">AMQP messaging</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="67.2" x="894.6" y="71.3098">network</text><rect fill="#FEFECE" filter="url(#f16l18uzehotqk)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="106.8" x="1028.4" y="47.3156"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90" x="1036.8" y="71.3098">Application</text><rect fill="#FFFFFF" filter="url(#f16l18uzehotqk)" height="178.5563" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="365.4" y="239.2687"/><rect fill="#FFFFFF" filter="url(#f16l18uzehotqk)" height="19.2" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="1078.2" y="398.625"/><path d="M9.6,107.6719 L9.6,155.6719 L285.6,155.6719 L285.6,119.6719 L273.6,107.6719 L9.6,107.6719 " fill="#FBFB77" filter="url(#f16l18uzehotqk)" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M273.6,107.6719 L273.6,119.6719 L285.6,119.6719 L273.6,107.6719 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="217.2" x="16.8" y="128.1521">The device is connected and</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="250.8" x="16.8" y="146.3115">authenticated with TENANT/4711</text><path d="M98.4,175.1906 L357.6,175.1906 L357.6,183.5906 L345.6,195.5906 L98.4,195.5906 L98.4,175.1906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.2;"/><rect fill="none" height="233.0344" style="stroke: #000000; stroke-width: 2.4;" width="1053.6" x="98.4" y="175.1906"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205.2" x="116.4" y="190.8709">Command subscription</text><polygon fill="#A80036" points="351,234.4688,363,239.2687,351,244.0688,355.8,239.2687" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="149.4" x2="358.2" y1="239.2687" y2="239.2687"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="157.8" y="224.11">1</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="177.6" x="173.4" y="215.0303">Command subscription</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="102" x="178.2" y="233.1896">/ TTD request</text><polygon fill="#A80036" points="691.8,287.5875,703.8,292.3875,691.8,297.1875,696.6,292.3875" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="377.4" x2="699" y1="292.3875" y2="292.3875"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="385.8" y="277.2287">2</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="223.2" x="401.4" y="268.149">register command consumer</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="284.4" x="401.4" y="286.3084">for device 4711, adapter instance #1</text><polygon fill="#A80036" points="916.2,358.8656,928.2,363.6656,916.2,368.4656,921,363.6656" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="706.2" x2="923.4" y1="363.6656" y2="363.6656"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="714.6" y="339.4271">3</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="133.2" x="730.2" y="321.2678">Consumer link on</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="156" x="730.2" y="339.4271">"command/TENANT"</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="175.2" x="735" y="357.5865">(if not already created)</text><polygon fill="#A80036" points="1063.8,393.825,1075.8,398.625,1063.8,403.425,1068.6,398.625" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="377.4" x2="1071" y1="398.625" y2="398.625"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="385.8" y="392.5459">4</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="585.6" x="401.4" y="392.5459">transfer("event/TENANT","4711","ttd=${ttd}")  via AMQP messaging network</text><!--MD5=[5b56c5fc69bc28ba78f45b18ed35b952]
@startuml
scale 1.2
hide footbox

participant Device order 10
box "Hono"
    participant "Protocol Adapter\ninstance #1" order 30
    participant "Command Router" order 40
end box
participant "AMQP messaging \nnetwork" order 60
participant Application order 70

autonumber

note over Device
The device is connected and
authenticated with TENANT/4711
end note

group Command subscription

    Device -> "Protocol Adapter\ninstance #1": Command subscription\n / TTD request
    activate "Protocol Adapter\ninstance #1"

    "Protocol Adapter\ninstance #1" -> "Command Router": register command consumer \nfor device 4711, adapter instance #1

    "Command Router" -> "AMQP messaging \nnetwork": Consumer link on \n"command/TENANT"\n (if not already created)

    "Protocol Adapter\ninstance #1" -> Application: transfer("event/TENANT","4711","ttd=${ttd}")  via AMQP messaging network
    activate Application
end
@enduml

PlantUML version 1.2019.11(Sun Sep 22 12:02:15 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.9.1+1-Ubuntu-0ubuntu1.18.04
Operating System: Linux
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>