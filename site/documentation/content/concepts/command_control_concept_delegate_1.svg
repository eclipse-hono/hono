<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="477.6px" preserveAspectRatio="none" style="width:1088px;height:477px;" version="1.1" viewBox="0 0 1088 477" width="1088.4px" zoomAndPan="magnify"><defs><filter height="300%" id="f1hmhg3jewutza" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.4"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.8" dy="4.8" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="451.5844" style="stroke: #A80036; stroke-width: 1.2;" width="439.2" x="262.2" y="4.8"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6" x="459" y="19.2803">Hono</text><rect fill="#FFFFFF" filter="url(#f1hmhg3jewutza)" height="124.0781" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="365.4" y="328.7063"/><rect fill="#FFFFFF" filter="url(#f1hmhg3jewutza)" height="19.2" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="1001.4" y="433.5844"/><rect fill="#FFFFFF" filter="url(#f1hmhg3jewutza)" height="178.5563" style="stroke: #000000; stroke-width: 2.4;" width="976.8" x="98.4" y="264.6281"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="148.8" x2="148.8" y1="89.6719" y2="463.5844"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="371.4" x2="371.4" y1="89.6719" y2="463.5844"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="592.2" x2="592.2" y1="89.6719" y2="463.5844"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="793.8" x2="793.8" y1="89.6719" y2="463.5844"/><line style="stroke: #A80036; stroke-width: 1.2; stroke-dasharray: 5.0,5.0;" x1="1006.8" x2="1006.8" y1="89.6719" y2="463.5844"/><rect fill="#FEFECE" filter="url(#f1hmhg3jewutza)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="73.2" x="110.4" y="47.3156"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="56.4" x="118.8" y="71.3098">Device</text><rect fill="#FEFECE" filter="url(#f1hmhg3jewutza)" height="55.9125" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="204" x="267" y="27.7594"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="187.2" x="275.4" y="51.7535">Hono Protocol Adapter</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="325.8" y="71.3098">instance 1</text><rect fill="#FEFECE" filter="url(#f1hmhg3jewutza)" height="55.9125" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="204" x="487.8" y="27.7594"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="187.2" x="496.2" y="51.7535">Hono Protocol Adapter</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="86.4" x="546.6" y="71.3098">instance 2</text><rect fill="#FEFECE" filter="url(#f1hmhg3jewutza)" height="55.9125" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="166.8" x="708.6" y="27.7594"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="145.2" x="717" y="51.7535">AMQP messaging</text><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="67.2" x="758.4" y="71.3098">network</text><rect fill="#FEFECE" filter="url(#f1hmhg3jewutza)" height="36.3562" style="stroke: #A80036; stroke-width: 1.7999999999999998;" width="106.8" x="951.6" y="47.3156"/><text fill="#000000" font-family="sans-serif" font-size="16.8" lengthAdjust="spacingAndGlyphs" textLength="90" x="960" y="71.3098">Application</text><rect fill="#FFFFFF" filter="url(#f1hmhg3jewutza)" height="124.0781" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="365.4" y="328.7063"/><rect fill="#FFFFFF" filter="url(#f1hmhg3jewutza)" height="19.2" style="stroke: #A80036; stroke-width: 1.2;" width="12" x="1001.4" y="433.5844"/><polygon fill="#A80036" points="780,176.7094,792,181.5094,780,186.3094,784.8,181.5094" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="592.2" x2="787.2" y1="181.5094" y2="181.5094"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="600.6" y="148.1912">0</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="133.2" x="616.2" y="120.9521">Consumer link on</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="156" x="616.2" y="139.1115">"command/TENANT"</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="148.8" x="616.2" y="157.2709">created for another</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="92.4" x="616.2" y="175.4303">subscription</text><path d="M9.6,197.1094 L9.6,245.1094 L285.6,245.1094 L285.6,209.1094 L273.6,197.1094 L9.6,197.1094 " fill="#FBFB77" filter="url(#f1hmhg3jewutza)" style="stroke: #A80036; stroke-width: 1.2;"/><path d="M273.6,197.1094 L273.6,209.1094 L285.6,209.1094 L273.6,197.1094 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.2;"/><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="217.2" x="16.8" y="217.5896">The device is connected and</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="250.8" x="16.8" y="235.749">authenticated with TENANT/4711</text><path d="M98.4,264.6281 L357.6,264.6281 L357.6,273.0281 L345.6,285.0281 L98.4,285.0281 L98.4,264.6281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.2;"/><rect fill="none" height="178.5563" style="stroke: #000000; stroke-width: 2.4;" width="976.8" x="98.4" y="264.6281"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205.2" x="116.4" y="280.3084">Command subscription</text><polygon fill="#A80036" points="351,323.9063,363,328.7063,351,333.5062,355.8,328.7063" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="149.4" x2="358.2" y1="328.7063" y2="328.7063"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="157.8" y="313.5475">1</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="177.6" x="173.4" y="304.4678">Command subscription</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="102" x="178.2" y="322.6271">/ TTD request</text><polygon fill="#A80036" points="780,358.8656,792,363.6656,780,368.4656,784.8,363.6656" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="377.4" x2="787.2" y1="363.6656" y2="363.6656"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="385.8" y="357.5865">2</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="300" x="401.4" y="357.5865">attach("receiver", "command/TENANT")</text><polygon fill="#A80036" points="780,393.825,792,398.625,780,403.425,784.8,398.625" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="377.4" x2="787.2" y1="398.625" y2="398.625"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="385.8" y="392.5459">3</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="318" x="401.4" y="392.5459">attach("receiver", "control/TENANT/4711")</text><polygon fill="#A80036" points="987,428.7844,999,433.5844,987,438.3844,991.8,433.5844" style="stroke: #A80036; stroke-width: 1.2;"/><line style="stroke: #A80036; stroke-width: 1.2;" x1="377.4" x2="994.2" y1="433.5844" y2="433.5844"/><text fill="#000000" font-family="sans-serif" font-size="15.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="385.8" y="427.5053">4</text><text fill="#000000" font-family="sans-serif" font-size="15.6" lengthAdjust="spacingAndGlyphs" textLength="585.6" x="401.4" y="427.5053">transfer("event/TENANT","4711","ttd=${ttd}")  via AMQP messaging network</text><!--MD5=[5ba83c9aca794515c9d86136c39b294c]
@startuml
scale 1.2
hide footbox

participant Device order 10
box "Hono"
    participant "Hono Protocol Adapter\ninstance 1" order 30
    participant "Hono Protocol Adapter\ninstance 2" order 40
end box
participant "AMQP messaging \nnetwork" order 60
participant Application order 70

autonumber 0

"Hono Protocol Adapter\ninstance 2" -> "AMQP messaging \nnetwork": Consumer link on \n"command/TENANT"\ncreated for another \nsubscription

note over Device
The device is connected and
authenticated with TENANT/4711
end note

group Command subscription

    Device -> "Hono Protocol Adapter\ninstance 1": Command subscription\n / TTD request
    activate "Hono Protocol Adapter\ninstance 1"

    "Hono Protocol Adapter\ninstance 1" -> "AMQP messaging \nnetwork": attach("receiver", "command/TENANT")
    "Hono Protocol Adapter\ninstance 1" -> "AMQP messaging \nnetwork": attach("receiver", "control/TENANT/4711")

    "Hono Protocol Adapter\ninstance 1" -> Application: transfer("event/TENANT","4711","ttd=${ttd}")  via AMQP messaging network
    activate Application
end
@enduml

PlantUML version 1.2019.11(Sun Sep 22 12:02:15 CEST 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.4+11-post-Ubuntu-1ubuntu218.04.3
Operating System: Linux
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>